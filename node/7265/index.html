<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <link rel="alternate" type="application/rss+xml" title="Comments for &quot;Übercart: jak na &amp;quot;Osobní převzetí zboží v obchodě&amp;quot;?&quot;" href="../../crss/node/7265/index.html" /> <link rel="shortcut icon" href="../../misc/favicon.ico" type="image/x-icon" />  <title>Übercart: jak na &quot;Osobní převzetí zboží v obchodě&quot;? | Drupal.cz</title>  <link type="text/css" rel="stylesheet" media="all" href="http://dev.drupal.cz/files/css/css_627b248ed357eeef4df34915828cdb13.css" />  <script type="text/javascript" src="http://dev.drupal.cz/files/js/js_109172055fe87fee6cad53494fc0765c.js"></script> <script type="text/javascript"> <!--//--><![CDATA[//><!-- jQuery.extend(Drupal.settings, {"basePath":"\/","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip"},"lightbox2":{"rtl":"0","file_path":"\/(\\w\\w\/)files","default_image":"\/sites\/all\/modules\/lightbox2\/images\/brokenimage.jpg","border_size":10,"font_color":"000","box_color":"fff","top_position":"","overlay_opacity":"0.8","overlay_color":"000","disable_close_click":1,"resize_sequence":0,"resize_speed":400,"fade_in_speed":400,"slide_down_speed":600,"use_alt_layout":0,"disable_resize":1,"disable_zoom":0,"force_show_nav":0,"show_caption":true,"loop_items":0,"node_link_text":"Zobrazit detaily obr\u00e1zku","node_link_target":0,"image_count":"Obr\u00e1zek !current z !total","video_count":"Video !current z !total","page_count":"Str\u00e1nka !current z !total","lite_press_x_close":"press \u003ca href=\"#\" onclick=\"hideLightbox(); return FALSE;\"\u003e\u003ckbd\u003ex\u003c\/kbd\u003e\u003c\/a\u003e to close","download_link_text":"","enable_login":false,"enable_contact/index.html":false,"keys_close":"c x 27","keys_previous":"p 37","keys_next":"n 39","keys_zoom":"z","keys_play_pause":"32","display_image_size":"original","image_node_sizes":"()","trigger_lightbox_classes":"","trigger_lightbox_group_classes":"","trigger_slideshow_classes":"","trigger_lightframe_classes":"","trigger_lightframe_group_classes":"","custom_class_handler":0,"custom_trigger_classes":"","disable_for_gallery_lists":true,"disable_for_acidfree_gallery_lists":true,"enable_acidfree_videos":true,"slideshow_interval":5000,"slideshow_automatic_start":true,"slideshow_automatic_exit":true,"show_play_pause":true,"pause_on_next_click":false,"pause_on_previous_click":true,"loop_slides":false,"iframe_width":600,"iframe_height":400,"iframe_border":1,"enable_video":0},"thickbox":{"close":"Close","next":"Next \u003e","prev":"\u003c Prev","esc_key":"or Esc Key","next_close":"Next \/ Close on last","image_count":"Image !current of !total"}}); //--><!]]> </script>      <!--[if IE 6]>       <script type="text/javascript">          var IE6UPDATE_OPTIONS = {           icons_path: "http://dev.drupal.cz/sites/all/modules/ie6update/images/",           message: "Internet Explorer is missing updates required to view this site. Click here to update... ",           url: "http://www.microsoft.com/windows/internet-explorer/default.aspx"         }       </script>       <script type="text/javascript" src="http://dev.drupal.cz/sites/all/modules/ie6update/ie6update.js"></script>     <![endif]-->    <script type="text/javascript"> </script> </head> <body> <div id="container"> <p id="goto"><a href="#main-text">Přeskočit přímo na text</a></p> <div id="header">  <h1><a href="../../">Drupal.cz<span></span></a></h1>   <div id="mainnav">    <h4 class="hide">Hlavní navigace</h4>   <ul> <li><a href="../../node/66/index.html"><span>O Drupalu</span></a></li> <li><a href="../../blog/index.html"><span>Blogy</span></a></li> <li><a href="../../faq/index.html"><span>FAQ</span></a></li> <li><a href="../../forum/index.html"><span>Fórum</span></a></li> <li><a href="../../prezentace/index.html"><span>Prezentace</span></a></li> <li><a href="../../node/8520/index.html"><span>Překlady</span></a></li> <li><a href="../../katalog/index.html"><span>Katalog</span></a></li> <li><a href="../../node/1447/index.html"><span>Stáhnout</span></a></li> <li><a href="../../sluzby/index.html"><span>Služby</span></a></li> <li><a href="../../node/11901/index.html"><span>Drupal.cz tým</span></a></li> </ul>   </div> <!-- mainnav end --> </div> <!-- header end -->  <div id="main">   <hr class="block-separator" />  <div class="text" id="main-text">   <div class="maintext">       <div class="articles"> <!--   <hr />    <h2>Články</h2>-->   </div> <!-- articles header end -->         <div class="breadcrumb"><a href="../../">Domů</a> » <a href="../../blog/index.html">Blogy</a> » <a href="../../blog/wojtha">Vojtěch Kusý&#039;s blog</a></div>        <h2 class="title">Übercart: jak na &quot;Osobní převzetí zboží v obchodě&quot;?</h2>         <div class="tabs"></div>           <div class="messages status"> Toto je archivovaná verze české komunitní stránky o CMS Drupal. Nejde na ni již přidávat nový obsah. Pro aktuální informace a kontakt s komunitou navštivte <a href='https://www.drupal.cz'>Drupal.cz</a></div>           <div class="article  article-7265">     <span class="submitted">Vložil/a <a href="../../user/wojtha" title="Zobrazit profil uživatele.">Vojtěch Kusý</a>, 22 Březen, 2010 - 17:48</span>     <div class="pcontent"><p>Již několikrát se mi stalo, že se mě někdo ptal, jak vytvořit v Čechách celkem běžnou věc – „osobní vyzvednutí zboží v obchodě“. Mnoho zvláště menších e-shopů nevyužívá žádné platební brány ani dopravce – vystačí si s dobírkou České Pošty. Pokud má takový e-shopík nějakou kamennou provozovnu či prodejnu, je častým zvykem nabízet kromě dobírky ještě <i>„osobní převzetí v obchodě“</i>, zdarma samozřejmě.</p>  <p>„Vyzvednutí v obchodě“ trochu boří filosofii e-shopu jako bezkontaktního prodeje na dálku. Vzhledem k našim podmínkám je však jeho oblíbenost celkem pochopitelná: Zvláště ve větších městech si lidé raději pro zboží zajedou při cestě z práce, než čekat frontu na poště – zaměstnaní lidé většinou nemají čas vyčkávat na pošťáka, který s oblibou přichází někdy uprostřed pracovního dne, u nás např. mezi 10 až 14h, a diví se že nikdo není doma. Takže místo aby zboží měli hned, na něj 1 až X dnů čekají a pak ještě po návratu z práce běží „s lístečkem“ na poštu, postavit se pěkně do fronty, aby zjistili, že se balík ztratil nebo je poškozený… a za tuhle zábavu ještě zaplatí nějakou tu stovku navíc.</p>  <p>Ale dost filozofování, pusťme se do práce…</p>  <p>Standardní instalace Übercartu nabízí metody platby jako platba kreditkou, platba šekem, dobírka a ostatní/obecná platba. Pro vyzvednutí v obchodě by bylo možné použít škatulku „ostatní“, co to ale je „ostatní“ resp. obecná platba? Nabízet zákazníkovi „platbu dobírkou“ a platbu „ostatní“ resp. „obecnou“ není dobrý nápad. Ještě by mohl chtít nějaký podnikavec vyměnit naše zboží za svojí právě sklizenou úrodu mrkve. <i>(Metoda ostatní, resp. generic payment má IMHO sloužit jen pro správce obchodu a umožňuje zadávat i detaily platby – jakým způsobem bude/byla platba provedena.)</i></p>  <p>Nezbývá než <b>vytvořit si vlastní metodu placení</b>. Metoda toho bude umět ještě méně, než metoda placení „ostatní“. Totiž nic. Jejími úkoly bude pouze „nechat se zaškrtnout“ a „zobrazit se na objednávce“.</p>  <p>Implementace je celkem jednoduchá: vytvoříme nový modul (např. uc_pickup), umístíme ho do adresáře s moduly, případně do podadresáře contribs v adresáři ubercartu (ale pozor, abychom si adresář nesmazali při upgradu UC, osobně preferuji spíš předchozí možnost).</p>  <p>Jako první věc je nutné <b>zaregistrovat naši metodu placení do Übercartu</b>. K tomu použijeme háček <a href="http://api.ubercart.org/api/function/hook_payment_method/2" target="_blank" title="hook_payment_method() na api.ubercart.org">hook_payment_met­hod()</a>.</p>  <p>&lt;?php /**<br /> * Implementation of hook_payment_met­hod().<br /> */ function uc_pickup_pay­ment_method() {<br /> $methods[] = array(<br /> ‚id‘ ⇒ ‚pickup‘,<br /> ‚name‘ ⇒ t(‚Pick-up‘),<br /> ‚title‘ ⇒ t(‚Pick-up at store‘),<br /> ‚desc‘ ⇒ t(‚Pay on pick-up at store.‘),<br /> ‚callback‘ ⇒ ‚uc_pickup_met­hod_pickup‘, // jméno funkce, která slouží jako ovladač této metody placení<br /> ‚weight‘ ⇒ 1,<br /> ‚checkout‘ ⇒ FALSE, // počáteční nastavení, zda se objeví platba v pokladně<br /> ‚no_gateway‘ ⇒ TRUE, // nepoužíváme platební bránu<br /> );<br /> return $methods; } ?&gt;</p>  <p>Nyní stačí vytvořit „handler“, tedy <b>náš ovladač metody placení</b>. Ten sice není zdokumentován jako „háček“, nicméně je třeba se napojoval na poměrně striktně dané rozhraní. Jako vzor použijeme ovladač metody ostatní/obecná platba – tzn funkci <a href="http://api.ubercart.org/api/function/uc_payment_method_other/2" target="_blank" title="uc_payment_method_other() na api.ubercart.org">uc_payment_met­hod_other()</a>.</p>  <p>&lt;?php /**<br /> * Pickup „payment“ handler<br /> */ function uc_pickup_met­hod_pickup($op, $arg1) {</p>  <p>switch ($op) {<br /> case ‚cart-details‘:<br /> // tento text se objeví při přepnutí metody placení v pokladně<br /> $details = variable_get(‚uc_­pickup_policy‘, t(‚Full payment is expected prior to pick-up.‘));<br /> return $details;</p>  <p>case ‚order-view‘:<br /> case ‚customer-view‘:<br /> // jméno metody placení, jak se objeví v objednávce<br /> $output = t(‚Pick-up‘);<br /> return $output;</p>  <p>case ‚order-details‘:<br /> case ‚edit-process‘:<br /> case ‚order-load‘:<br /> case ‚order-save‘:<br /> // neimplemetováno<br /> break;<br /> } }</p>  <p>?&gt;</p>  <p>A to je vše. Celý modul si můžete <a href="http://www.drupal.cz/files/uc_pickup.zip" title="Stáhnout modul UC Pickup">stáhnout</a> (zabaleno v ZIP, 7kB).</p>  <p><b>TIP na závěr:</b> pokud chcete jednoduše zpoplatnit samotnou metodu placení (např. fixně 100 Kč za dobírku nebo 666 Kč za vyzvednutí v obchodě, když vám přijde, že ti lidé jsou nějací nesnesitelní), použijte modul UC PMA neboli <a href="http://drupal.org/project/uc_pma" target="_blank" title="Stránka projektu UC PMA na Drupal.org">Ubercart Payment Method Adjustments</a>. Tento modul přidá sloupeček do nastavení platebních metod, kde je možné zadat částku, která se přičte k objednávce při použití dané metody placení.</p><table id="attachments" class="sticky-enabled">  <thead><tr><th>Příloha</th><th>Velikost</th> </tr></thead> <tbody>  <tr class="odd"><td><a href="http://dev.drupal.cz/files/uc_pickup.zip">uc_pickup.zip</a></td><td>6.59 KB</td> </tr> </tbody> </table> <div class="nodeauthor-info"><span>About the author</span>není</div></div>     <div class="links"></div> <!-- social-links end --> </div> <!-- social-add end --> <div class="morelinks">  <a href="../../blog/wojtha" title="Read Vojtěch Kusý&#039;s latest blog entries." class="blog_usernames_blog/index.html">Vojtěch Kusý&#039;s blog</a>  <a href="../../" class="comment_forbidden"></a> <div id="social-add-7772" class="social-add digglink" onmouseover="showSocials(7772)" onmouseout="hideSocials(7772)"><a class="social-href-link" href="#">Linkni to!</a> <div class="social-links" id="social-links-7772">  <a href="http://www.jagg.cz/bookmarks.php?action=add&amp;address=http://dev.drupal.cz/blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode&amp;title=Übercart: jak na &quot;Osobní převzetí zboží v obchodě&quot;?" class="cs_social_Jagg.cz">Jagg.cz</a>  <a href="http://linkuj.cz/?id=linkuj&amp;url=http://dev.drupal.cz/blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode&amp;title=Übercart: jak na &quot;Osobní převzetí zboží v obchodě&quot;?" class="cs_social_Linkuj.cz">Linkuj.cz</a>  <a href="http://asdf.sk/submit.php?url=http://dev.drupal.cz/node/7265/index.html" class="cs_social_Asdf.sk">Asdf.sk</a>  <a href="http://www.mojelinky.sk/bookmarks.php?action=add&amp;address=http://dev.drupal.cz/blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode&amp;title=Übercart: jak na &quot;Osobní převzetí zboží v obchodě&quot;?" class="cs_social_Mojelinky.sk">Mojelinky.sk</a> </div> <!-- morelinks end -->   </div>  </div> <!-- article end -->   <div class="article-spacer">&nbsp;</div>   <div id="comments">   <a id="comment-26289"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-26289" class="active">Díky, tohle je moc užitečné a</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/mat-0" title="Zobrazit profil uživatele.">MaT</a> dne 22 Březen, 2010 - 22:49.  </div>    <div class="content">     <p>Díky, tohle je moc užitečné a inspirativní. :-)</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <a id="comment-26292"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-26292" class="active">To nevypadá zle, jen se</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/bighead" title="Zobrazit profil uživatele.">Petr Illek</a> dne 23 Březen, 2010 - 09:14.  </div>    <div class="content">     <p>To nevypadá zle, jen se zeptám, jestli to nějak řeší předchozí krok v pokladně, tedy „přepravní přirážku“. Tohle je v UC trochu nedotažené, že mi vybraná přepravní přirážka neomezí možnosti plateb. I když nedávno jsem na to našel nějaký modul <a href="http://drupal.org/project/uc_conditional_payment">Conditional payment</a>, který by to řeší přes conditional actions.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-26344"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-26344" class="active">Asi úplně nerozumím na co se</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/wojtha" title="Zobrazit profil uživatele.">Vojtěch Kusý</a> dne 24 Březen, 2010 - 21:57.  </div>    <div class="content">     <p>Asi úplně nerozumím na co se ptáš. Jinak Conditional Payments by asi měli jít použít, nebo např. UC Fee. Na poplatky je modulů víc.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-26382"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-26382" class="active">Poslední dva kroky v pokladně</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/bighead" title="Zobrazit profil uživatele.">Petr Illek</a> dne 25 Březen, 2010 - 18:20.  </div>    <div class="content">     <p>Poslední dva kroky v pokladně (před poznámkou) jsou výběr dopravy a výběr platební metody. Tyhle dva kroky na sebe nereagují (tedy krom toho nového Conditional Payments modulu). Tam směřovala i moje otázka, jestli to ten tvůj modul bere nějak v potaz, nebo jestli to nechává na inteligenci zákazníka, že když vybere platbu hotově, tak nebude vybírat dopravu českou poštou…</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-26394"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-26394" class="active">Jo tak. Jak jsem psal</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/wojtha" title="Zobrazit profil uživatele.">Vojtěch Kusý</a> dne 26 Březen, 2010 - 16:07.  </div>    <div class="content">     <p>Jo tak. Jak jsem psal v článku, toto je určeno pro menší obchody, které „dvoukrokovou“ objednávku vůbec nepoužívají.</p>  <p>Používají pouze 1) dobírku 2) osobní převzetí. Modul (resp. krok) <em>shipping</em> se vůbec nepoužívá, používá se pouze <em>payment</em>.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-28627"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-28627" class="active">Můžu se zeptat, jak udělám tu</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/kecinzer" title="Zobrazit profil uživatele.">kecinzer</a> dne 25 Červen, 2010 - 11:12.  </div>    <div class="content">     <p>Můžu se zeptat, jak udělám tu dobírku? Jestli jsem to dobře pochopil, tak si musím na každou metodu platby psát vlastní modul? To mi tedy nepřijde moc optimální :(</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-28656"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-28656" class="active">Dobírka tam už je</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/wojtha" title="Zobrazit profil uživatele.">Vojtěch Kusý</a> dne 28 Červen, 2010 - 10:30.  </div>    <div class="content">     <p>Dobírka tam už je mezi standardníma <em>payment methods</em>. V AJ je to COD … <em>Cash on Delivery</em>. Není tam jen ten „pickup“. Tzn vyzvednutí v obchodě.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> </div></div></div></div></div><a id="comment-26332"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-26332" class="active">Thanks</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/gynekolog" title="Zobrazit profil uživatele.">Gynekolog</a> dne 26 Březen, 2010 - 18:06.  </div>    <div class="content">     <p>Jo! tip na závěr je to co sem potřeboval vědět, díky:D</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <a id="comment-33726"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-33726" class="active">Hm tak já bych byl rád moci</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 3 Únor, 2011 - 15:54.  </div>    <div class="content">     <p>Hm tak já bych byl rád moci používat jen Payment method nastavení u checkoutu, chce to ale něco za shiping weight quote. Nemáte někdo třeba ucpma upravený s nějakejma podmínkama ve smyslu orderWeight&gt;1 {adjustment=xxx}. Anebo jak jste to (cena na základě váhy objednavky) vyřešili pokud nevyužívate žádného uc_shipping</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <a id="comment-34182"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-34182" class="active">dobrý tip…patřím mezi lidi,</a></h3>    <div class="submitted">     Napsal uživatel <a href="http://www.detske-postylky24.cz" rel="nofollow">Anonymous</a> (bez ověření) dne 24 Únor, 2011 - 16:39.  </div>    <div class="content">     <p>dobrý tip…patřím mezi lidi, co si objednávají na dobírku pravidelně a fakt je, že né vždy mě chytí doma a to je pak pěkně na pytel…Měli by se mrknout na tvůj návrh…</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <a id="comment-38340"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-38340" class="active">Netušíte jak nastavit fixní</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/gynekolog" title="Zobrazit profil uživatele.">Gynekolog</a> dne 16 Listopad, 2011 - 15:30.  </div>    <div class="content">     <p>Netušíte jak nastavit fixní cenu za dobírku pro Drupal 7?</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-93791"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-93791" class="active">uc_pma module ti pomuze</a></h3>    <div class="submitted">     Napsal uživatel Anonymous dne 28 Únor, 2016 - 16:34.  </div>    <div class="content">     uc_pma module ti pomuze  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> </div><a id="comment-93796"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-93796" class="active">Podpora pro Drupal 7</a></h3>    <div class="submitted">     Napsal uživatel Anonymous dne 28 Únor, 2016 - 16:37.  </div>    <div class="content">     Pro D7 je nutne upravit hook na uc_payment a zmenit uc_pickup.info, aby podporoval D7  uc_pickup.info name = In-Store Pickup description = In-Store pickup payment method dependencies[] = uc_cart dependencies[] = uc_payment package = „Ubercart – extra“ core = 7.x php = 5.3  uc_pickup.module &lt;?php  /**<br /> * @file Simple module which provides „Pickup“ payment method to the Übercart<br /> *<br /> * @author Vojtech Kusy &lt;wojtha&#64;gmail.com&gt;<br /> * @license http://www.gnu.org/…/gpl-2.0.txt GNU Public License v2<br /> */  /**<br /> * Implementation of hook_uc_paymen­t_method().<br /> *<br /> * @return array<br /> */ function uc_pickup_uc_pa­yment_method() {<br /> $methods[] = array(<br /> ‚id‘ ⇒ ‚pickup‘,<br /> ‚name‘ ⇒ t(‚Pick-up‘),<br /> ‚title‘ ⇒ t(‚Pick-up at store‘),<br /> ‚desc‘ ⇒ t(‚Pay on pick-up at store.‘),<br /> ‚callback‘ ⇒ ‚uc_pickup_met­hod_pickup‘,<br /> ‚weight‘ ⇒ 1,<br /> ‚checkout‘ ⇒ FALSE,<br /> ‚no_gateway‘ ⇒ TRUE<br /> );<br /> return $methods; }  /**<br /> * Pickup „payment“ handler<br /> *<br /> * @return array<br /> */ function uc_pickup_met­hod_pickup($op, $order) {<br /> switch ($op) {<br /> case ‚cart-details‘:<br /> $details[‚#markup‘] = variable_get(‚uc_­pickup_policy‘, t(‚Full payment is expected prior to pick-up.‘));<br /> return $details;  case ‚order-view‘:<br /> case ‚customer-view‘:<br /> $details[‚#markup‘] = t(‚Pick-up‘);<br /> return $details[‚#mar­kup‘];  case ‚order-details‘:<br /> case ‚edit-process‘:<br /> case ‚order-load‘:<br /> case ‚order-save‘:<br /> break;<br /> } }  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <a id="comment-94486"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-94486" class="active">D7 podpora z predchoziho prispevku</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/blazas" title="Zobrazit profil uživatele.">blazas</a> dne 1 Duben, 2016 - 08:52.  </div>    <div class="content">     <p>Pri zobrazeni objednavek hazi Fatal error: Unsupported operand types in …ubercart/pay­ment/uc_paymen­t/uc_payment_or­der_pane.inc on line 42. Opraveny kod nize.</p>  <pre class="php"> /** * @file Simple module which provides „Pickup“ payment method to the Ubercart * * @author Vojtech Kusy &lt;<a href="mailto:wojtha@gmail.com">wojtha&#64;gmail.com</a>&gt; * @license <a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt">http://www.gnu.org/…/gpl-2.0.txt</a> GNU Public License v2 *//**<br />* Implementation of hook_uc_paymen­t_method().<br />*<br />* @return array<br />*/ function uc_pickup_uc_pa­yment_method() {<br />$methods[] = array(<br />‚id‘  ⇒ ‚pickup‘,<br />‚name‘  ⇒ t(‚Pick-up‘),<br />‚title‘  ⇒ t(‚Pick-up at store‘),<br />‚desc‘  ⇒ t(‚Pay on pick-up at store.‘),<br />‚callback‘  ⇒ ‚uc_pickup_met­hod_pickup‘,<br />‚weight‘  ⇒ 1,<br />‚checkout‘  ⇒ TRUE,<br />‚no_gateway‘  ⇒ TRUE<br />);<br />return $methods; }/**<br />* Pickup „payment“ handler<br />*<br />* @return array<br />*/ function uc_pickup_met­hod_pickup($op, $order) {<br />switch ($op) {<br />case ‚cart-details‘:<br />$details[‚#markup‘] = variable_get(‚uc_­pickup_policy‘, t(‚Full payment is expected prior to pick-up.‘));<br />return $details;case ‚order-view‘:<br />case ‚customer-view‘:<br />$details[‚#markup‘] = t(‚Pick-up‘);<br />return $details;case ‚order-details‘: case ‚edit-process‘: case ‚order-load‘: case ‚order-save‘: break; } } </pre>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <a id="comment-102941"></a> <div class="comment clear-block">       <h3><a href="../../blog/wojtha/uebercart-jak-na-osobni-prevzeti-v-obchode#comment-102941" class="active">nice work</a></h3>    <div class="submitted">     Napsal uživatel Anonymous dne 10 Červen, 2017 - 20:07.  </div>    <div class="content">     Thanks for your solution keep it up the good work By Listpoon  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> </div>           </div> <!-- maintext end -->  </div> <!-- text end -->  <div class="drupal-block">      <div class="db-content block-block-56 block" id="block-block-56">    <div class="db-article">     <h3></h3>     <div class="db-body">      <div>      <a href="../../node/52781/index.html"><img src="../../files/podpora-da-banner-2.png" /></a>     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-block-21 block" id="block-block-21">    <div class="db-article">     <h3>Bezpečnost Drupalu</h3>     <div class="db-body">      <div>      <p>Z hlediska bezpečnosti je Drupal na velmi vysoké úrovni, díky propracovanému systému hlášení, prověřování a řešení možných problémů.</p>  <p><a href="../../node/11896/index.html">Čtěte více a odebírejte bezpečnostní aktuality</a></p>     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-tagadelic-4 block" id="block-tagadelic-4">    <div class="db-article">     <h3>Články, prezentace</h3>     <div class="db-body">      <div>      <a href="../../clanky/akce" class="tagadelic level5">akce</a>  <a href="../../clanky/node/11896/index.html" class="tagadelic level6">bezpečnost</a>  <a href="../../clanky/camp" class="tagadelic level1">camp</a>  <a href="../../clanky/cck" class="tagadelic level3">CCK</a>  <a href="../../clanky/drupal" class="tagadelic level4">drupal</a>  <a href="../../clanky/drupalcz" class="tagadelic level5">drupal.cz</a>  <a href="../../clanky/drupal-6x" class="tagadelic level1">Drupal 6.x</a>  <a href="../../clanky/drupal-7x" class="tagadelic level2">Drupal 7.x</a>  <a href="../../clanky/drupalcamp" class="tagadelic level3">drupalcamp</a>  <a href="../../clanky/drupalcon" class="tagadelic level3">drupalcon</a>  <a href="../../clanky/drupal-setkani" class="tagadelic level3">Drupal setkání</a>  <a href="../../clanky/galerie/index.html" class="tagadelic level1">galerie</a>  <a href="../../clanky/image" class="tagadelic level2">image</a>  <a href="../../clanky/instalace" class="tagadelic level1">instalace</a>  <a href="../../clanky/lokalizace" class="tagadelic level3">lokalizace</a>  <a href="../../clanky/modul" class="tagadelic level1">modul</a>  <a href="../../clanky/moduly" class="tagadelic level6">moduly</a>  <a href="../../clanky/navod" class="tagadelic level3">navod</a>  <a href="../../clanky/ostatni" class="tagadelic level4">ostatní</a>  <a href="../../clanky/php" class="tagadelic level2">php</a>  <a href="../../clanky/prezentace/index.html" class="tagadelic level1">Prezentace</a>  <a href="../../clanky/programovani" class="tagadelic level1">programování</a>  <a href="../../clanky/pro-webmastery" class="tagadelic level5">pro webmastery</a>  <a href="../../clanky/preklad" class="tagadelic level2">překlad</a>  <a href="../../clanky/prekladatelsky-sprint" class="tagadelic level3">překladatelský sprint</a>  <a href="../../clanky/preklady" class="tagadelic level3">překlady</a>  <a href="../../clanky/pripadove-studie" class="tagadelic level3">případové studie</a>  <a href="../../clanky/reklama" class="tagadelic level1">reklama</a>  <a href="../../clanky/rules" class="tagadelic level1">rules</a>  <a href="../../clanky/setkani" class="tagadelic level5">setkání</a>  <a href="../../clanky/setkani-akce" class="tagadelic level6">setkání, akce</a>  <a href="../../clanky/slovensko" class="tagadelic level1">slovensko</a>  <a href="../../clanky/taxonomy" class="tagadelic level1">taxonomy</a>  <a href="../../clanky/theming" class="tagadelic level3">theming</a>  <a href="../../clanky/tipy-triky" class="tagadelic level5">tipy &amp; triky</a>  <a href="../../clanky/ubercart" class="tagadelic level2">UberCart</a>  <a href="../../clanky/upgrade" class="tagadelic level1">upgrade</a>  <a href="../../clanky/views" class="tagadelic level3">views</a>  <a href="../../clanky/vyvoj" class="tagadelic level3">vývoj</a>  <a href="../../clanky/vyvoj-drupalu" class="tagadelic level5">vývoj drupalu</a>  <a href="../../clanky/webhosting" class="tagadelic level1">Webhosting</a>  <a href="../../clanky/workshop" class="tagadelic level1">workshop</a>  <a href="../../clanky/wysiwyg" class="tagadelic level1">wysiwyg</a>  <a href="../../clanky/zacatecnici" class="tagadelic level5">začátečníci</a>  <a href="../../clanky/sablony-vzhled" class="tagadelic level3">šablony a vzhled</a>  <a href="../../clanky/skoleni" class="tagadelic level1">školení</a>       </div>     </div> <!-- db-body end -->     <div class="db-footer">      <p>&nbsp;</p>     </div>    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-forum-1 block" id="block-forum-1">    <div class="db-article">     <h3>Nová témata</h3>     <div class="db-body">      <div>      <div class="item-list"><ul><li class="first"><a href="../../node/87461/index.html">Logická drobečková navigace</a></li> <li><a href="../../node/87426/index.html" title="7 komentářů">Vypnutí modulu</a></li> <li><a href="../../node/87121/index.html" title="4 komentáře">Adsense</a></li> <li><a href="../../node/87016/index.html" title="4 komentáře">Fotoalbum</a></li> <li class="last"><a href="../../node/86811/index.html" title="2 komentáře">Kombinovaný filtr hledá pouze v jedné kategorii</a></li> </ul></div><div class="more-link"><a href="../../forum/index.html" title="Přečíst nejnovější diskuse.">další</a></div>     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-comment-0 block" id="block-comment-0">    <div class="db-article">     <h3>Poslední komentáře</h3>     <div class="db-body">      <div>      <div class="item-list"><ul><li class="first"><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104231">stahnout puvodni verzi webu a</a><br />před 2 týdny 2 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104226">ne, tohle fakt neni reseni.</a><br />před 2 týdny 2 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104221">Smazání modulu (přes FTP) není dobrý nápad</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/fotoalbum#comment-104216">To jo, ale i tak ten view</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104211">VYŘEŠENO</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104206">Zjištění závislostí</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104201">jak vymazes cache tak hned</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/fotoalbum#comment-104196">Ve view se dá u políček</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104191">V D8 se modul nevypíná, ale</a><br />před 2 týdny 3 dny</li> <li class="last"><a href="../../forum/po-instalaci/jak-na/fotoalbum#comment-104186">Osobně jsem dělal např. typ</a><br />před 2 týdny 4 dny</li> </ul></div>     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-block-4 block" id="block-block-4">    <div class="db-article">     <h3>RSS Kanály</h3>     <div class="db-body">      <div>      <p><a href="../../rss.xml/index.html" title="RSS Kanal"><img src="../../misc/feed.png" width="16" height="16" alt="Feed" /> Hlavní RSS kanál</a></p> <div class="more-link"> <a href="../../node/79/index.html">všechny kanály</a> </div>      </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-user-3 block" id="block-user-3">    <div class="db-article">     <h3>Kdo je online</h3>     <div class="db-body">      <div>      Momentálně je online <em>1 uživatel</em> a <em>7 hostů</em>.<div class="item-list"><h3>Online uživatelé</h3><ul><li class="first last"><a href="../../user/coyot" title="Zobrazit profil uživatele.">radimklaska</a></li> </ul></div>     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-block-8 block" id="block-block-8">    <div class="db-article">     <h3>Support</h3>     <div class="db-body">      <div>      <p><a href="http://www.psychologie-online.cz">Psychologie - poradenství</a></p> <!-- Start Visual Website Optimizer Asynchronous Code --><!-- Start Visual Website Optimizer Asynchronous Code --><script type='text/javascript'> var _vwo_code=(function(){ var account_id=31941, settings_tolerance=2000, library_tolerance=1500, use_existing_jquery=false, // DO NOT EDIT BELOW THIS LINE f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init(); </script><!-- End Visual Website Optimizer Asynchronous Code --><!-- End Visual Website Optimizer Asynchronous Code -->     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end --> </div> <!-- drupal-block end -->  <div class="cleaner">&nbsp;</div> </div> <!-- main end --> </div> <!-- container end --> <div id="footer">  (C) Copyright 2012 Jakub Suchý, <a href="../../contact/index.html">kontakt</a>. Chrání nás <a href="http://www.virusfree.cz/antispam-antivir">antispam</a> Virusfree. Drupal je registrovaná ochranná známka <a href="http://buytaert.net">Driese Buytaerta</a>.  <a href="https://www.acquia.com/products-services/acquia-managed-cloud">Drupal Hosting</a> powered by Acquia Cloud.  <div class="preloader">   <img src="../../sites/all/themes/drupal/images/nav-right.png" width="1" height="1" alt="." />   <img src="../../sites/all/themes/drupal/images/nav-left.png" width="1" height="1" alt="." />   <img src="../../sites/all/themes/drupal/images/nav-left-active.png" width="1" height="1" alt="." />   <img src="../../sites/all/themes/drupal/images/nav-right-active.png" width="1" height="1" alt="." />  </div> </div> <!-- footer end --> <script type="text/javascript" src="http://dev.drupal.cz/files/js/js_1681de23e148f8277d1e7ee3fb33fced.js"></script> <script type="text/javascript"> <!--//--><![CDATA[//><!-- jQuery.extend(Drupal.settings, {"googleCSE":{"language":"cs"}}); //--><!]]> </script> <script type="text/javascript"> <!--//--><![CDATA[//><!-- var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-114938389-2"]);_gaq.push(["_trackPageview"]);(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})(); //--><!]]> </script> </body> </html> 