<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <link rel="alternate" type="application/rss+xml" title="Comments for &quot;Cachování v Drupalu&quot;" href="../../crss/node/11916/index.html" /> <link rel="shortcut icon" href="../../misc/favicon.ico" type="image/x-icon" />  <title>Cachování v Drupalu | Drupal.cz</title>  <link type="text/css" rel="stylesheet" media="all" href="http://dev.drupal.cz/files/css/css_e216528d7984babc8fef61df3f3dde3f.css" />  <script type="text/javascript" src="http://dev.drupal.cz/files/js/js_050b67296d895f264d903d0650b39e87.js"></script> <script type="text/javascript"> <!--//--><![CDATA[//><!-- jQuery.extend(Drupal.settings, {"basePath":"\/","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip"},"lightbox2":{"rtl":"0","file_path":"\/(\\w\\w\/)files","default_image":"\/sites\/all\/modules\/lightbox2\/images\/brokenimage.jpg","border_size":10,"font_color":"000","box_color":"fff","top_position":"","overlay_opacity":"0.8","overlay_color":"000","disable_close_click":1,"resize_sequence":0,"resize_speed":400,"fade_in_speed":400,"slide_down_speed":600,"use_alt_layout":0,"disable_resize":1,"disable_zoom":0,"force_show_nav":0,"show_caption":true,"loop_items":0,"node_link_text":"Zobrazit detaily obr\u00e1zku","node_link_target":0,"image_count":"Obr\u00e1zek !current z !total","video_count":"Video !current z !total","page_count":"Str\u00e1nka !current z !total","lite_press_x_close":"press \u003ca href=\"#\" onclick=\"hideLightbox(); return FALSE;\"\u003e\u003ckbd\u003ex\u003c\/kbd\u003e\u003c\/a\u003e to close","download_link_text":"","enable_login":false,"enable_contact/index.html":false,"keys_close":"c x 27","keys_previous":"p 37","keys_next":"n 39","keys_zoom":"z","keys_play_pause":"32","display_image_size":"original","image_node_sizes":"()","trigger_lightbox_classes":"","trigger_lightbox_group_classes":"","trigger_slideshow_classes":"","trigger_lightframe_classes":"","trigger_lightframe_group_classes":"","custom_class_handler":0,"custom_trigger_classes":"","disable_for_gallery_lists":true,"disable_for_acidfree_gallery_lists":true,"enable_acidfree_videos":true,"slideshow_interval":5000,"slideshow_automatic_start":true,"slideshow_automatic_exit":true,"show_play_pause":true,"pause_on_next_click":false,"pause_on_previous_click":true,"loop_slides":false,"iframe_width":600,"iframe_height":400,"iframe_border":1,"enable_video":0},"thickbox":{"close":"Close","next":"Next \u003e","prev":"\u003c Prev","esc_key":"or Esc Key","next_close":"Next \/ Close on last","image_count":"Image !current of !total"}}); //--><!]]> </script>      <!--[if IE 6]>       <script type="text/javascript">          var IE6UPDATE_OPTIONS = {           icons_path: "http://dev.drupal.cz/sites/all/modules/ie6update/images/",           message: "Internet Explorer is missing updates required to view this site. Click here to update... ",           url: "http://www.microsoft.com/windows/internet-explorer/default.aspx"         }       </script>       <script type="text/javascript" src="http://dev.drupal.cz/sites/all/modules/ie6update/ie6update.js"></script>     <![endif]-->    <script type="text/javascript"> </script> </head> <body> <div id="container"> <p id="goto"><a href="#main-text">Přeskočit přímo na text</a></p> <div id="header">  <h1><a href="../../">Drupal.cz<span></span></a></h1>   <div id="mainnav">    <h4 class="hide">Hlavní navigace</h4>   <ul> <li><a href="../../node/66/index.html"><span>O Drupalu</span></a></li> <li><a href="../../blog/index.html"><span>Blogy</span></a></li> <li><a href="../../faq/index.html"><span>FAQ</span></a></li> <li><a href="../../forum/index.html"><span>Fórum</span></a></li> <li><a href="../../prezentace/index.html"><span>Prezentace</span></a></li> <li><a href="../../node/8520/index.html"><span>Překlady</span></a></li> <li><a href="../../katalog/index.html"><span>Katalog</span></a></li> <li><a href="../../node/1447/index.html"><span>Stáhnout</span></a></li> <li><a href="../../sluzby/index.html"><span>Služby</span></a></li> <li><a href="../../node/11901/index.html"><span>Drupal.cz tým</span></a></li> </ul>   </div> <!-- mainnav end --> </div> <!-- header end -->  <div id="main">   <hr class="block-separator" />  <div class="text" id="main-text">   <div class="maintext">       <div class="articles"> <!--   <hr />    <h2>Články</h2>-->   </div> <!-- articles header end -->         <div class="breadcrumb"><a href="../../">Domů</a> » <a href="../../forum/index.html">Témata fóra</a> » <a href="../../forum/po-instalaci">Po instalaci</a> » <a href="../../forum/jak-na-to">Jak na to?</a></div>        <h2 class="title">Cachování v Drupalu</h2>         <div class="tabs"></div>           <div class="messages status"> Toto je archivovaná verze české komunitní stránky o CMS Drupal. Nejde na ni již přidávat nový obsah. Pro aktuální informace a kontakt s komunitou navštivte <a href='https://www.drupal.cz'>Drupal.cz</a></div>         <div class="article  article-11916">     <span class="submitted">Vložil/a Anonymous, 8 Květen, 2012 - 16:28</span>   <div class="pcontent">     <div class="forum-kat">       <b>Kategorie:</b>       Jak na to?    </div>     <div class="forum-ver">       <b>Týká se verze:</b>       Drupal 7.x    </div>     <p>Ahoj,</p>  <p>výkonnost Drupalu je opravdu mizerná. Zprovoznil jsem si cachování pro anonymní uživatele. Sice se bezdůvodně občas smaže, ale po nacachování je načítání opravdu rychlé. To se už nedá říct o přihlášených uživatelých. Je možné servírovat nacachovaný obsah od anonymních uživatelů zobrazit uživatelům přihlášeným?</p>  <p>To by mělo jít i bez Authcache, jen nevím, kde přesně začít s psaním svého modulu. Dokumentace Drupalu není zrovna ideální.</p>  <p>Díky, Martin.</p>  <div class="forum-topic-navigation clear-block">           <a href="../../node/11986/index.html" class="topic-previous" title="Přejít na předchozí téma.">‹ Migrace Filefield po upgrade D6 -&gt; D7</a>               <a href="../../node/11966/index.html" class="topic-next" title="Přejít na následující téma.">Titulky odkazov ›</a>       </div>   </div>      <div class="links"></div> <!-- social-links end --> </div> <!-- social-add end --> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> <div id="social-add-2464" class="social-add digglink" onmouseover="showSocials(2464)" onmouseout="hideSocials(2464)"><a class="social-href-link" href="#">Linkni to!</a> <div class="social-links" id="social-links-2464">  <a href="http://www.jagg.cz/bookmarks.php?action=add&amp;address=http://dev.drupal.cz/forum/po-instalaci/jak-na/cachovani-v-drupalu&amp;title=Cachování v Drupalu" class="cs_social_Jagg.cz">Jagg.cz</a>  <a href="http://linkuj.cz/?id=linkuj&amp;url=http://dev.drupal.cz/forum/po-instalaci/jak-na/cachovani-v-drupalu&amp;title=Cachování v Drupalu" class="cs_social_Linkuj.cz">Linkuj.cz</a>  <a href="http://asdf.sk/submit.php?url=http://dev.drupal.cz/node/11916/index.html" class="cs_social_Asdf.sk">Asdf.sk</a>  <a href="http://www.mojelinky.sk/bookmarks.php?action=add&amp;address=http://dev.drupal.cz/forum/po-instalaci/jak-na/cachovani-v-drupalu&amp;title=Cachování v Drupalu" class="cs_social_Mojelinky.sk">Mojelinky.sk</a> </div> <!-- morelinks end -->   </div></div> <!-- article end --> <div class="article-spacer">&nbsp;</div> <div id="comments">   <a id="comment-42686"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42686" class="active">PHP APC jako bytecode cache.</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 8 Květen, 2012 - 18:02.  </div>    <div class="content">     <ol> 	<li><strong>PHP APC</strong> jako bytecode cache. V podstate neco jako 	pred-kompilace php skriptu</li>  	<li><strong>memcached</strong> server + php_memcache + <a href="http://drupal.org/project/memcache">http://drupal.org/…ect/memcache</a> 	aby nacachovany obsah neputoval do pomaleho sql, ale radsi do rychleho memcached 	serveru</li>  	<li>pro stranky s velkym anonymnim provozem je bleskovy 	drupal.org/pro­ject/boost</li> </ol>  <p>Samozrejme to chce mit vlastni server, na beznem hostingu to moc neprojde. google toho na tema optimalizace vykonu nabizi habadej. tak pred rokem zhruba se tady resilo myslim nejaky skoda octavia web nebo co to bylo ktery na hostingu nechteli ani videt a drupal.cz tym to myslim ted hostuje u sebe a jede to dobre (pokud si pamatuju jak to dopadlo)</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42696"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42696" class="active">Paráda</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 8 Květen, 2012 - 19:59.  </div>    <div class="content">     <p>Díky moc.</p>  <p>O modulech APC cache, memcache, filecache… vím. Postahoval jsem si je, nakonfiguroval a jejich vliv je znát.</p>  <p>Mě by však zajímalo, jak je možné přihlášeným uživatelům vrátit už nacachovaný obsah z cache pro anonymní uživatele. Chtěl bych, aby přihlášení uživatelé na vybraných stránkách dostali stejný obsah jako anonymní. S tímhle mi může poradit asi někdo kdo má už s Drupalem zkušenosti.</p>  <p>Díky.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42701"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42701" class="active">neco podobneho jsem resil a</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 8 Květen, 2012 - 20:38.  </div>    <div class="content">     <p>neco podobneho jsem resil a jedine co jsem vymyslel je vlastni modul ktery pouziva funkce cache_get() a cache_set() uvnitr page_callback z hook_menu a uvnitr hook_block_view. totez bylo nutne ve chvili kdy se pouziva nejaky access modul a moznost cachovat bloky je vypnuta (tam ale clovek musi vedet ze ma v bloku vzdy jen veci ktere nepodlehaji access pravidlum)</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> </div></div><a id="comment-42736"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42736" class="active">Ešte by som pozrel</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/frankye" title="Zobrazit profil uživatele.">frankye</a> dne 9 Květen, 2012 - 15:33.  </div>    <div class="content">     <p>Ešte by som pozrel na</p>  <ul> 	<li>Varnish – Reverzná proxy cache apache – a tiež je k tomu aj modul 	na lepšiu integráciu (<a href="http://drupal.org/project/varnish">http://drupal.org/project/varnish</a>) – 	ja to používam bez modulu a je to fakt že sila.</li>  	<li>Pressflow – Distribúcia Drupalu zameraná na výkon.</li>  	<li>A podľa info z nejakej knihy pri vysoko-náročnom webe je možné 	vytvoriť dve( alebo viac) databázy, kde jedna bude primárna a druhá 	sekundárna. Ide hlavne o prihláseného užívateľa, kde aktuálny 	užívateľ vidí data z primárnej db (jedná sa hlavne o jeho zmeny v db), 	zatiaľ čo ostatní vidia to, čo je na sekundárnej s malým 	opozdením…</li> </ul>  <p>Ale hlavne si napísal, čo je na Drupale „mizerné, a čo nie je "ideálne“, ale nenapísal si veľa o svojom riešení a tak nie je jasné, či riešiš nový, alebo už naplnený web, či má mať web väčšiu záťaž a akú, akú používaš db, či máš vlastný server a pod…</p>  <p>BTW: A dúfam, že napíšeš aj výsledok…</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42746"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42746" class="active">myslim, ze lepsi nez 2 DB je</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 9 Květen, 2012 - 16:22.  </div>    <div class="content">     <p>myslim, ze lepsi nez 2 DB je memcached server. (pokud jsem pochopil spravne ze ta jedna tam plnila vlastne funkci jakesi cache)</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <a id="comment-42756"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42756" class="active">Výkonnost</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 9 Květen, 2012 - 19:23.  </div>    <div class="content">     <p>Díky za typy na další modul.</p>  <p>Používám PressFlow. Pokud bych se vrátil k mému původnímu dotazu, tak není vůbec třeba rozepisovat, na jakém serveru web běží ani kolik má nainstalovaných modulů nebo množství návštěv. Já bych chtěl naservírovat nacachovaný obsah od anonymních uživatelů těm přihlášeným. Nic víc. Na vybraných url bych to opravdu ocenil.</p>  <p>Jak říkám, jsem připraven, že si budu muset napsat vlastní modul, jen nevím kde začít. Žádnou pořádnou dokumentaci jsem na netu nezačal. S programováním samotných modulů mám již nějaký zkutešenosti.</p>  <p>Díky, Martin.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42761"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42761" class="active">Urobit vlastnu cache pre</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/havran" title="Zobrazit profil uživatele.">Havran</a> dne 9 Květen, 2012 - 19:58.  </div>    <div class="content">     <p>Urobit vlastnu cache pre (napriklad) blok je pomerne jednoduche. Predstavme si ako priklad ze mame blok ktory zobrazuje zoznam prispevkov po nejakych narocnejsich operaciach z db a podobne. Priklad by vyzeral takto:</p>  <p>&lt;?php</p>  <p>function my_block($reset = FALSE) {<br /> $data = cache_get(‚my­_module:my_bloc­k‘);</p>  <p>if ($data &amp;&amp; !$reset) {<br /> $output = $data-&gt;data;<br /> $status = ‚‘;<br /> }<br /> else {<br /> // zlozite operacie (vyber z databazy, spracovanie udajov a podobne)</p>  <p>$output = output();<br /> // cache 24 hours<br /> cache_set(‚my­_module:my_bloc­k‘, $output, ‚cache‘, time() + (24*3600));<br /> $status = ‚‘;<br /> }<br /> $output .= $status;</p>  <p>return $output; }</p>  <p>?&gt;</p>  <p>Ak sa na stranke zmeni nieco co vypisujes v cached bloku (napriklad zmenis nazov node) tak musis zabezpecit reset cache napr. zavolanim <code>my_block(TRUE)</code>. Idealne ak vies miesto zmeny odchytit a resetovat cache vzdy len ked je to potrebne. Napriklad pre node title by to bolo v <code>hook_nodeapi(), $op == 'update' alebo 'insert'</code>.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42821"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42821" class="active">Cache</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 10 Květen, 2012 - 09:02.  </div>    <div class="content">     <p>Díky,</p>  <p>princip cache_get a cache_set je mi jasný. V tabulce cache_page jsou nacachovaná data od anonymních uživatelů. Předpokládám, že tam bude obsažena celá stránka. Nacachovaná url z této tabulky se vrací anonymním užvatelům velice rychle. Já bych potřeboval vědět, jak vracet nachované url i přihlášeným uživatelům. Klidně aby všechny role viděli stejný obsah.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42856"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42856" class="active">pres hook_menu nadefinovat</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 10 Květen, 2012 - 14:46.  </div>    <div class="content">     <p>pres hook_menu nadefinovat vlastni page_callback a tam pouzit cache_get() a cache_set(). co jsem napsal nejasne?</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> </div></div></div></div><a id="comment-42836"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42836" class="active">Asi to nebude take</a></h3>    <div class="submitted">     Napsal uživatel <a href="../../user/havran" title="Zobrazit profil uživatele.">Havran</a> dne 10 Květen, 2012 - 10:54.  </div>    <div class="content">     <p>Asi to nebude take jednoduche – vid inc/bootstrap.inc funkcia _drupal_bootstrap_pa­ge_cache() Asi by sa to dalo urobit zavesenim sa na hook_boot() a zopakovanim toho co robi drupal v tej funkcii <a href="http://api.drupal.org/api/drupal/modules">http://api.drupal.org/…upal/modules</a>!system!system­.api.php/functi­on/hook_boot/7.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42861"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42861" class="active">_drupal_bootstrap_page_cache</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 10 Květen, 2012 - 15:41.  </div>    <div class="content">     <p>Ahoj,</p>  <p>díky moc. Koukám na funkci <a href="http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/_drupal_bootstrap_page_cache/7">_drupal_bootstrap_pa­ge_cache</a> a ta je volána funkcí <a href="http://api.drupal.org/api/drupal/includes%21bootstrap.inc/function/drupal_bootstrap/7">drupal_bootstrap</a>. Poku v _drupal_bootstrap_pa­ge_cache() upravím podmínku <code><br /> if (!isset($_COO­KIE[session_na­me()]) &amp;&amp; $cache_enabled) {<br /> }</code> na <code><br /> if ($cache_enabled) {<br /> }</code> tak přihlášení uživatelé dostávají stejné stránky jako anonymní uživatelé. To jsem si přál :) Nepřišel jsem ale na to, jak tuto modifikaci udělat pomocí hook_boot().</p>  <p>Díky.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42866"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42866" class="active">hook_boot</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 10 Květen, 2012 - 16:02.  </div>    <div class="content">     <p>Zkusím kód z povmínky funkce _drupal_bootstrap_pa­ge_cache nakopírovat do hook_boot a to by mělo pomoct. Pak dám vědět. Díky moc!</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> </div><a id="comment-42921"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42921" class="active">Skoro hotovo :)</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 11 Květen, 2012 - 23:04.  </div>    <div class="content">     <p>Ahoj,</p>  <p>ještě jednou děkuji za nasměrování. Výsledný kód vypadá takto:</p>  <p><code> &lt;?php</code></p>  <p>function MUJ_MODUL_boot() {<br /> global $base_root;<br /> $patternAutoSearch = ‚/^\/getlocati­ons_my_search\/au­tocomplete\/.*$/‘;</p>  <p>if(preg_match($pat­ternAutoSearch, request_uri())) {</p>  <p>$cache = cache_get($ba­se_root . request_uri(), ‚cache_page‘);<br /> // If there is a cached page, display it.<br /> if (is_object($cache)) {<br /> header(‚X-Drupal-Cache: HIT‘);<br /> // Restore the metadata cached with the page.<br /> $_GET[‚q‘] = $cache-&gt;data[‚path‘];<br /> drupal_set_ti­tle($cache-&gt;data[‚title‘], PASS_THROUGH);<br /> date_default_ti­mezone_set(dru­pal_get_user_ti­mezone());<br /> // If the skipping of the bootstrap hooks is not enforced, call<br /> // hook_boot.<br /> if (variable_get(‚pa­ge_cache_invo­ke_hooks‘, TRUE)) {<br /> bootstrap_invo­ke_all(‚boot‘);<br /> }<br /> drupal_serve_pa­ge_from_cache($cache);<br /> // If the skipping of the bootstrap hooks is not enforced, call<br /> // hook_exit.<br /> if (variable_get(‚pa­ge_cache_invo­ke_hooks‘, TRUE)) {<br /> bootstrap_invo­ke_all(‚exit‘);<br /> }<br /> // We are done.<br /> exit;<br /> }<br /> } } ?&gt; </p>  <p>Nyní se vrací všem uživatelům nacachovaný obsah od těch anonymních. Jak by se dalo postupovat, kdybych chtěl přihlášeným uživatelům také cachovat jejich stránky, které anonymní vidí trochu jinak?</p>  <p>Rád bych dosáhl toho, aby každá role měla svojí šablonu. Takže každý uživatel role „přihlášený uživatel“ by viděl všechno stejně. Upravil bych si vzhled administračního panelu. A pak předpokládám, že bych si musel vytvořit své databázové tabulky. Pro každou roli jednu. Jak ale řeknu Drupalu, aby cachoval obsah pro jednu roli do požadované tabulky? Budu muset použít ob_start? Nebo to jde nějak elegantněji „zachytávat“ vygenerovaný kód Drupalem? V jakém hooku mohu vygenerovaný kód odychtnout?</p>  <p>Díky.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42926"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42926" class="active">imho staci do ID ty cache</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 12 Květen, 2012 - 07:46.  </div>    <div class="content">     <p>imho staci do ID ty cache doplnit jestli je anonym nebo prihlaseny, na radku $cache = cache_get($ba­se_root . request_uri(), ‚cache_page‘); doplnit request_uri() . ($user-&gt;uid ? ‚auth : 'anon‘) nebo tak nejak. pred to samozrejme frknout global $user;</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42936"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42936" class="active">cache_get</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 12 Květen, 2012 - 09:40.  </div>    <div class="content">     <p>cache_get načítá nacachovaná data z tabulky. Já bych potřeboval data cachovat pro přihlášené uživatele. Nejsem si jist, jak dostat obsah vygenerované stránky.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42961"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42961" class="active">AHA, uz to vidim. a chces jim</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 12 Květen, 2012 - 12:48.  </div>    <div class="content">     <p>AHA, uz to vidim. a chces jim posilat jen neco nebo vse? proste bych sel to co pisu potreti: hook_menu, definovat vlastni page_callback a v ni cache_get(); a cache_set(); . podobny princip jako vyse popsane pro bloky.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42971"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42971" class="active">cache_get()</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 12 Květen, 2012 - 16:55.  </div>    <div class="content">     <p>A potřetí to neni řešení. Potřebuji cachovat celý html výstup. Tak jako se to děje s cachováním pro anonymní uživatele (tabulka cache_page). Jako příklad by mohl posloužit třeba cachování úvodní stránky. Jak v page_callback odchytím celý html výstup úvodní stránky? Jak používat funkce cache_get() a cache_set() je mi jasné.</p>  <p>Díky za tvůj čas!</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <div class="indented"><a id="comment-42981"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42981" class="active">moznou inspiraci hledej</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 12 Květen, 2012 - 17:50.  </div>    <div class="content">     <p>moznou inspiraci hledej v modulu boost ktery to nekde v kodu resi ve smyslu &lt;?php global $user; if (!$user-&gt;uid) {<br /> if (!existuje_da­ny_soubor) {<br /> vytvor_soubor();<br /> }<br /> serviruj_soubor();<br /> exit; } ?&gt; ale nevim z hlavy presne v kterem miste kodu a jak to tam tvori, kazdopadne vim, ze to v nem urcite najdes.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> <a id="comment-42986"></a> <div class="comment clear-block">       <h3><a href="../../forum/po-instalaci/jak-na/cachovani-v-drupalu#comment-42986" class="active">jinak teda zalezi jestli</a></h3>    <div class="submitted">     Napsal uživatel Anonymous (bez ověření) dne 12 Květen, 2012 - 17:53.  </div>    <div class="content">     <p>jinak teda zalezi jestli chces cachovat vse nebo jen neco. pokud konkretni stranky tak bych se v pohode spokojil s cachovanim hlavniho obsahu v page_callback + samostatne nacachovat vsechny bloky. pak uz je to jen vykonani modulu block a serie cache_get() coz je s memcached serverem bleskovka.</p>  </div> <div class="morelinks">  <a href="../../" class="comment_forbidden"></a> </div> <!-- morelinks end -->   </div> </div></div></div></div></div></div></div>           </div> <!-- maintext end -->  </div> <!-- text end -->  <div class="drupal-block">      <div class="db-content block-block-56 block" id="block-block-56">    <div class="db-article">     <h3></h3>     <div class="db-body">      <div>      <a href="../../node/52781/index.html"><img src="../../files/podpora-da-banner-2.png" /></a>     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-block-21 block" id="block-block-21">    <div class="db-article">     <h3>Bezpečnost Drupalu</h3>     <div class="db-body">      <div>      <p>Z hlediska bezpečnosti je Drupal na velmi vysoké úrovni, díky propracovanému systému hlášení, prověřování a řešení možných problémů.</p>  <p><a href="../../node/11896/index.html">Čtěte více a odebírejte bezpečnostní aktuality</a></p>     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-tagadelic-4 block" id="block-tagadelic-4">    <div class="db-article">     <h3>Články, prezentace</h3>     <div class="db-body">      <div>      <a href="../../clanky/akce" class="tagadelic level5">akce</a>  <a href="../../clanky/node/11896/index.html" class="tagadelic level6">bezpečnost</a>  <a href="../../clanky/camp" class="tagadelic level1">camp</a>  <a href="../../clanky/cck" class="tagadelic level3">CCK</a>  <a href="../../clanky/drupal" class="tagadelic level4">drupal</a>  <a href="../../clanky/drupalcz" class="tagadelic level5">drupal.cz</a>  <a href="../../clanky/drupal-6x" class="tagadelic level1">Drupal 6.x</a>  <a href="../../clanky/drupal-7x" class="tagadelic level2">Drupal 7.x</a>  <a href="../../clanky/drupalcamp" class="tagadelic level3">drupalcamp</a>  <a href="../../clanky/drupalcon" class="tagadelic level3">drupalcon</a>  <a href="../../clanky/drupal-setkani" class="tagadelic level3">Drupal setkání</a>  <a href="../../clanky/galerie/index.html" class="tagadelic level1">galerie</a>  <a href="../../clanky/image" class="tagadelic level2">image</a>  <a href="../../clanky/instalace" class="tagadelic level1">instalace</a>  <a href="../../clanky/lokalizace" class="tagadelic level3">lokalizace</a>  <a href="../../clanky/modul" class="tagadelic level1">modul</a>  <a href="../../clanky/moduly" class="tagadelic level6">moduly</a>  <a href="../../clanky/navod" class="tagadelic level3">navod</a>  <a href="../../clanky/ostatni" class="tagadelic level4">ostatní</a>  <a href="../../clanky/php" class="tagadelic level2">php</a>  <a href="../../clanky/prezentace/index.html" class="tagadelic level1">Prezentace</a>  <a href="../../clanky/programovani" class="tagadelic level1">programování</a>  <a href="../../clanky/pro-webmastery" class="tagadelic level5">pro webmastery</a>  <a href="../../clanky/preklad" class="tagadelic level2">překlad</a>  <a href="../../clanky/prekladatelsky-sprint" class="tagadelic level3">překladatelský sprint</a>  <a href="../../clanky/preklady" class="tagadelic level3">překlady</a>  <a href="../../clanky/pripadove-studie" class="tagadelic level3">případové studie</a>  <a href="../../clanky/reklama" class="tagadelic level1">reklama</a>  <a href="../../clanky/rules" class="tagadelic level1">rules</a>  <a href="../../clanky/setkani" class="tagadelic level5">setkání</a>  <a href="../../clanky/setkani-akce" class="tagadelic level6">setkání, akce</a>  <a href="../../clanky/slovensko" class="tagadelic level1">slovensko</a>  <a href="../../clanky/taxonomy" class="tagadelic level1">taxonomy</a>  <a href="../../clanky/theming" class="tagadelic level3">theming</a>  <a href="../../clanky/tipy-triky" class="tagadelic level5">tipy &amp; triky</a>  <a href="../../clanky/ubercart" class="tagadelic level2">UberCart</a>  <a href="../../clanky/upgrade" class="tagadelic level1">upgrade</a>  <a href="../../clanky/views" class="tagadelic level3">views</a>  <a href="../../clanky/vyvoj" class="tagadelic level3">vývoj</a>  <a href="../../clanky/vyvoj-drupalu" class="tagadelic level5">vývoj drupalu</a>  <a href="../../clanky/webhosting" class="tagadelic level1">Webhosting</a>  <a href="../../clanky/workshop" class="tagadelic level1">workshop</a>  <a href="../../clanky/wysiwyg" class="tagadelic level1">wysiwyg</a>  <a href="../../clanky/zacatecnici" class="tagadelic level5">začátečníci</a>  <a href="../../clanky/sablony-vzhled" class="tagadelic level3">šablony a vzhled</a>  <a href="../../clanky/skoleni" class="tagadelic level1">školení</a>       </div>     </div> <!-- db-body end -->     <div class="db-footer">      <p>&nbsp;</p>     </div>    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-forum-1 block" id="block-forum-1">    <div class="db-article">     <h3>Nová témata</h3>     <div class="db-body">      <div>      <div class="item-list"><ul><li class="first"><a href="../../node/87461/index.html">Logická drobečková navigace</a></li> <li><a href="../../node/87426/index.html" title="7 komentářů">Vypnutí modulu</a></li> <li><a href="../../node/87121/index.html" title="4 komentáře">Adsense</a></li> <li><a href="../../node/87016/index.html" title="4 komentáře">Fotoalbum</a></li> <li class="last"><a href="../../node/86811/index.html" title="2 komentáře">Kombinovaný filtr hledá pouze v jedné kategorii</a></li> </ul></div><div class="more-link"><a href="../../forum/index.html" title="Přečíst nejnovější diskuse.">další</a></div>     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-comment-0 block" id="block-comment-0">    <div class="db-article">     <h3>Poslední komentáře</h3>     <div class="db-body">      <div>      <div class="item-list"><ul><li class="first"><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104231">stahnout puvodni verzi webu a</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104226">ne, tohle fakt neni reseni.</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104221">Smazání modulu (přes FTP) není dobrý nápad</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/fotoalbum#comment-104216">To jo, ale i tak ten view</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104211">VYŘEŠENO</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104206">Zjištění závislostí</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104201">jak vymazes cache tak hned</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/fotoalbum#comment-104196">Ve view se dá u políček</a><br />před 2 týdny 3 dny</li> <li><a href="../../forum/po-instalaci/jak-na/vypnuti-modulu#comment-104191">V D8 se modul nevypíná, ale</a><br />před 2 týdny 3 dny</li> <li class="last"><a href="../../forum/po-instalaci/jak-na/fotoalbum#comment-104186">Osobně jsem dělal např. typ</a><br />před 2 týdny 4 dny</li> </ul></div>     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-block-4 block" id="block-block-4">    <div class="db-article">     <h3>RSS Kanály</h3>     <div class="db-body">      <div>      <p><a href="../../rss.xml/index.html" title="RSS Kanal"><img src="../../misc/feed.png" width="16" height="16" alt="Feed" /> Hlavní RSS kanál</a></p> <div class="more-link"> <a href="../../node/79/index.html">všechny kanály</a> </div>      </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-user-3 block" id="block-user-3">    <div class="db-article">     <h3>Kdo je online</h3>     <div class="db-body">      <div>      Momentálně je online <em>1 uživatel</em> a <em>4 hosté</em>.<div class="item-list"><h3>Online uživatelé</h3><ul><li class="first last"><a href="../../user/coyot" title="Zobrazit profil uživatele.">radimklaska</a></li> </ul></div>     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end -->    <div class="db-content block-block-8 block" id="block-block-8">    <div class="db-article">     <h3>Support</h3>     <div class="db-body">      <div>      <p><a href="http://www.psychologie-online.cz">Psychologie - poradenství</a></p> <!-- Start Visual Website Optimizer Asynchronous Code --><!-- Start Visual Website Optimizer Asynchronous Code --><script type='text/javascript'> var _vwo_code=(function(){ var account_id=31941, settings_tolerance=2000, library_tolerance=1500, use_existing_jquery=false, // DO NOT EDIT BELOW THIS LINE f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init(); </script><!-- End Visual Website Optimizer Asynchronous Code --><!-- End Visual Website Optimizer Asynchronous Code -->     </div>     </div> <!-- db-body end -->    </div> <!-- db-article end -->   </div> <!-- db-content end --> </div> <!-- drupal-block end -->  <div class="cleaner">&nbsp;</div> </div> <!-- main end --> </div> <!-- container end --> <div id="footer">  (C) Copyright 2012 Jakub Suchý, <a href="../../contact/index.html">kontakt</a>. Chrání nás <a href="http://www.virusfree.cz/antispam-antivir">antispam</a> Virusfree. Drupal je registrovaná ochranná známka <a href="http://buytaert.net">Driese Buytaerta</a>.  <a href="https://www.acquia.com/products-services/acquia-managed-cloud">Drupal Hosting</a> powered by Acquia Cloud.  <div class="preloader">   <img src="../../sites/all/themes/drupal/images/nav-right.png" width="1" height="1" alt="." />   <img src="../../sites/all/themes/drupal/images/nav-left.png" width="1" height="1" alt="." />   <img src="../../sites/all/themes/drupal/images/nav-left-active.png" width="1" height="1" alt="." />   <img src="../../sites/all/themes/drupal/images/nav-right-active.png" width="1" height="1" alt="." />  </div> </div> <!-- footer end --> <script type="text/javascript" src="http://dev.drupal.cz/files/js/js_1681de23e148f8277d1e7ee3fb33fced.js"></script> <script type="text/javascript"> <!--//--><![CDATA[//><!-- jQuery.extend(Drupal.settings, {"googleCSE":{"language":"cs"}}); //--><!]]> </script> <script type="text/javascript"> <!--//--><![CDATA[//><!-- var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-114938389-2"]);_gaq.push(["_trackPageview"]);(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})(); //--><!]]> </script> </body> </html> 